{"componentChunkName":"component---src-templates-blog-post-js","path":"/12/","result":{"data":{"site":{"siteMetadata":{"title":"アーカイブ"}},"markdownRemark":{"id":"89a7bc9e-0011-56e8-ae29-3790145397e9","excerpt":"今更ですがクリスマス抽選会で使ったソフトの中身を適当に解説します。 概要 　昨年のクリスマス抽選会で以下のような抽選ソフトを使用しました。 01.png 学科や学年ごとの人数、景品と当選人数を設定し、ランダムに選ぶだけの簡単なものです。Siv3Dで作成しました。 02.png 03.png 04.png 05.png…","html":"<p>今更ですがクリスマス抽選会で使ったソフトの中身を適当に解説します。</p>\n<h2>概要</h2>\n<p>　昨年のクリスマス抽選会で以下のような抽選ソフトを使用しました。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/e95b30d6-b5ff-b667-3a15-639ce55f2428.png\" alt=\"01.png\"></p>\n<p>学科や学年ごとの人数、景品と当選人数を設定し、ランダムに選ぶだけの簡単なものです。Siv3Dで作成しました。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/ceee86ac-9eb7-6e2a-60c0-8921827ba416.png\" alt=\"02.png\"></p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/e9a3ce7d-83e5-e8d8-bf89-bc807e8b4f39.png\" alt=\"03.png\"></p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/5dcc6a81-349a-3785-7f2c-e34825f1fc7b.png\" alt=\"04.png\"></p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/512926f8-831a-2215-3596-563364f33f5b.png\" alt=\"05.png\"></p>\n<p>難しいアルゴリズム等を使用したわけではありませんが、手間が省けるよういくつか工夫しました(C++らしい書き方ができているかどうか不安ですが...)。</p>\n<p>以下、リポジトリです。</p>\n<!-- <a href=\"https://github.com/chonai-flora/LotteryApp\" class=\"linkcard\">\n<div class=\"text\"><p class=\"title\">chonai-flora/LotteryApp: 学内抽選会用アプリ</p><p class=\"link\">https://github.com</p></div><div class=\"img\"><img src=\"https://opengraph.githubassets.com/477af3393a9ba62e5ad0b94e007a9b5dde5672af679f6b91cd69e0e22ecf015c/chonai-flora/LotteryApp\"></div>\n</a> -->\n<div class=\"iframely-embed\"><div class=\"iframely-responsive\" style=\"height: 140px; padding-bottom: 0;\"><a href=\"https://github.com/chonai-flora/LotteryApp\" data-iframely-url=\"//iframely.net/cKXNU7r?card=small&omit_script=1\"></a></div></div>\n<h2>各学年・学科の人数を指定</h2>\n<p>　Siv3Dには <a href=\"https://zenn.dev/reputeless/books/siv3d-documentation/viewer/tutorial-data-structure#6.3-%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E3%83%86%E3%83%BC%E3%83%96%E3%83%AB\"><code class=\"language-text\">HashTable</code></a> というクラステンプレートが用意されています。<code class=\"language-text\">Lottery</code> クラスを作り、<code class=\"language-text\">Lottery::m_students</code> にハッシュテーブル形式で学生の情報を格納してやります。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Common.hpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">&lt;Siv3D.hpp></span> <span class=\"token comment\">// OpenSiv3D v0.6.6</span></span>\n\n<span class=\"token comment\">// 学科</span>\n<span class=\"token keyword\">enum</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Course</span> <span class=\"token punctuation\">{</span> A<span class=\"token punctuation\">,</span> B<span class=\"token punctuation\">,</span> C<span class=\"token punctuation\">,</span> D <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> Array<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> courseNames<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"A-\"</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"B-\"</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"C-\"</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"D-\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Lottery.hpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Common.hpp\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Lottery</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token function\">Lottery</span><span class=\"token punctuation\">(</span>int32 a1<span class=\"token punctuation\">,</span> int32 b1<span class=\"token punctuation\">,</span> int32 c1<span class=\"token punctuation\">,</span>\n\t\t\tint32 a2<span class=\"token punctuation\">,</span> int32 b2<span class=\"token punctuation\">,</span> int32 c2<span class=\"token punctuation\">,</span>\n\t\t\tint32 a3<span class=\"token punctuation\">,</span> int32 b3<span class=\"token punctuation\">,</span> int32 c3<span class=\"token punctuation\">,</span>\n\t\t\tint32 a4<span class=\"token punctuation\">,</span> int32 b4<span class=\"token punctuation\">,</span> int32 c4<span class=\"token punctuation\">,</span>\n\t\t\tint32 a5<span class=\"token punctuation\">,</span> int32 b5<span class=\"token punctuation\">,</span> int32 c5<span class=\"token punctuation\">,</span>\n\t\t\tint32 d1<span class=\"token punctuation\">,</span> int32 d2<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">removeStudents</span><span class=\"token punctuation\">(</span>int32 grade<span class=\"token punctuation\">,</span> Course course<span class=\"token punctuation\">,</span> Array<span class=\"token operator\">&lt;</span>int32<span class=\"token operator\">></span> ids<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tArray<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token function\">chooseStudents</span><span class=\"token punctuation\">(</span>int32 n<span class=\"token punctuation\">,</span> String title<span class=\"token punctuation\">,</span> TextWriter<span class=\"token operator\">&amp;</span> writer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> insertLineFeed <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\tHashTable<span class=\"token operator\">&lt;</span>Course<span class=\"token punctuation\">,</span> HashTable<span class=\"token operator\">&lt;</span>int32<span class=\"token punctuation\">,</span> Array<span class=\"token operator\">&lt;</span>int32<span class=\"token operator\">>></span><span class=\"token operator\">></span> m_students<span class=\"token punctuation\">;</span>\n\n\tString <span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>int32 grade<span class=\"token punctuation\">,</span> Course course<span class=\"token punctuation\">,</span> int32 id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Lottery.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Lottery.hpp\"</span></span>\n\n<span class=\"token comment\">// 抽選会クラス(全学生のデータ)</span>\n<span class=\"token class-name\">Lottery</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Lottery</span><span class=\"token punctuation\">(</span>int32 a1<span class=\"token punctuation\">,</span> int32 b1<span class=\"token punctuation\">,</span> int32 c1<span class=\"token punctuation\">,</span>\n\t\t\t\t int32 a2<span class=\"token punctuation\">,</span> int32 b2<span class=\"token punctuation\">,</span> int32 c2<span class=\"token punctuation\">,</span>\n\t\t\t\t int32 a3<span class=\"token punctuation\">,</span> int32 b3<span class=\"token punctuation\">,</span> int32 c3<span class=\"token punctuation\">,</span>\n\t\t\t\t int32 a4<span class=\"token punctuation\">,</span> int32 b4<span class=\"token punctuation\">,</span> int32 c4<span class=\"token punctuation\">,</span>\n\t\t\t\t int32 a5<span class=\"token punctuation\">,</span> int32 b5<span class=\"token punctuation\">,</span> int32 c5<span class=\"token punctuation\">,</span>\n\t\t\t\t int32 d1<span class=\"token punctuation\">,</span> int32 d2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tm_students <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tCourse<span class=\"token double-colon punctuation\">::</span>A<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> a1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> a2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> a3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> a4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> a5<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tCourse<span class=\"token double-colon punctuation\">::</span>B<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> b5<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tCourse<span class=\"token double-colon punctuation\">::</span>C<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c3<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c4<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> c5<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">{</span>\n\t\t\tCourse<span class=\"token double-colon punctuation\">::</span>D<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> d1<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t\t<span class=\"token punctuation\">{</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> d2<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Siv3Dには <a href=\"https://zenn.dev/reputeless/books/siv3d-documentation/viewer/tutorial-utility#18.5-%E6%8C%87%E5%AE%9A%E3%81%97%E3%81%9F%E6%95%B0%E3%81%AE%E7%AF%84%E5%9B%B2%E3%82%92%E3%83%AB%E3%83%BC%E3%83%97%E3%81%99%E3%82%8B\"><code class=\"language-text\">Range()</code></a> メソッドも用意されています。<code class=\"language-text\">Range(start, end)</code> で <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mi>s</mi><mi>t</mi><mi>a</mi><mi>r</mi><mi>t</mi><mo separator=\"true\">,</mo><mi>e</mi><mi>n</mi><mi>d</mi><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[start, end]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord mathnormal\">s</span><span class=\"mord mathnormal\">t</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">r</span><span class=\"mord mathnormal\">t</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord mathnormal\">e</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span><span class=\"mclose\">]</span></span></span></span></span> の配列を作成します。Pythonの <code class=\"language-text\">range()</code> 関数に近いです。</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// e.g. A科の学生データ</span>\n    Course<span class=\"token double-colon punctuation\">::</span>A<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 1-Aは40人</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 2-Aは40人</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token number\">2</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 3-Aは41人</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">41</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 4-Aは38人</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">38</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n        <span class=\"token comment\">// 5-Aは40人</span>\n        <span class=\"token punctuation\">{</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Range</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>これで1年生は <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo stretchy=\"false\">[</mo><mtext>出席番号</mtext><mn>1</mn><mtext>番</mtext><mo separator=\"true\">,</mo><mn>2</mn><mtext>番</mtext><mo separator=\"true\">,</mo><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mi mathvariant=\"normal\">.</mi><mo separator=\"true\">,</mo><mtext>出席番号</mtext><mn>40</mn><mtext>番</mtext><mo stretchy=\"false\">]</mo></mrow><annotation encoding=\"application/x-tex\">[出席番号1番, 2番, ..., 出席番号40番]</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mopen\">[</span><span class=\"mord cjk_fallback\">出席番号</span><span class=\"mord\">1</span><span class=\"mord cjk_fallback\">番</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">2</span><span class=\"mord cjk_fallback\">番</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord\">...</span><span class=\"mpunct\">,</span><span class=\"mspace\" style=\"margin-right:0.1667em;\"></span><span class=\"mord cjk_fallback\">出席番号</span><span class=\"mord\">40</span><span class=\"mord cjk_fallback\">番</span><span class=\"mclose\">]</span></span></span></span></span> の学生が在籍していることが分かります。</p>\n<p>あとは宣言する際に人数を渡してやります。</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">// 1~5年生までの3学科の人数を指定</span>\n<span class=\"token comment\">// 今回は専攻科2学年は除外</span>\nLottery <span class=\"token function\">lottery</span><span class=\"token punctuation\">(</span><span class=\"token number\">43</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span> <span class=\"token number\">45</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">47</span><span class=\"token punctuation\">,</span> <span class=\"token number\">43</span><span class=\"token punctuation\">,</span> <span class=\"token number\">42</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">44</span><span class=\"token punctuation\">,</span> <span class=\"token number\">43</span><span class=\"token punctuation\">,</span> <span class=\"token number\">50</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">44</span><span class=\"token punctuation\">,</span> <span class=\"token number\">44</span><span class=\"token punctuation\">,</span> <span class=\"token number\">38</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">39</span><span class=\"token punctuation\">,</span> <span class=\"token number\">45</span><span class=\"token punctuation\">,</span> <span class=\"token number\">39</span><span class=\"token punctuation\">,</span>\n                <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>欠席者・休学者等を除外</h2>\n<p>　今回は必要なかったのですが、一応指定した番号の学生を除く関数も用意していました。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Main.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/* 省略 */</span>\n    \n<span class=\"token comment\">// 欠席者を除外(今回は4A-04, 4A-06, 4A-20を除外)</span>\nlottery<span class=\"token punctuation\">.</span><span class=\"token function\">removeStudents</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> Course<span class=\"token double-colon punctuation\">::</span>A<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">20</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>中身はこんな感じです。<a href=\"https://zenn.dev/reputeless/books/siv3d-documentation/viewer/tutorial-data-structure#6.1-%E5%8B%95%E7%9A%84%E9%85%8D%E5%88%97\"><code class=\"language-text\">Array</code></a> クラスの <code class=\"language-text\">remove_if()</code> を使いました。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Lotter.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">void</span> <span class=\"token class-name\">Lottery</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">removeStudents</span><span class=\"token punctuation\">(</span>int32 grade<span class=\"token punctuation\">,</span> Course course<span class=\"token punctuation\">,</span> Array<span class=\"token operator\">&lt;</span>int32<span class=\"token operator\">></span> ids<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">not</span> m_students<span class=\"token punctuation\">[</span>course<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span>grade<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">auto</span><span class=\"token operator\">&amp;</span> id <span class=\"token operator\">:</span> ids<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tm_students<span class=\"token punctuation\">[</span>course<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>grade<span class=\"token punctuation\">]</span><span class=\"token punctuation\">.</span><span class=\"token function\">remove_if</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token operator\">&amp;</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">(</span>int32 n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">==</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>抽選</h2>\n<p>　まずは学生データを文字列に変換する関数を作ります。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Lotter.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">String <span class=\"token class-name\">Lottery</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>int32 grade<span class=\"token punctuation\">,</span> Course course<span class=\"token punctuation\">,</span> int32 id<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\tString courseName <span class=\"token operator\">=</span> courseNames<span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span><span class=\"token generic-function\"><span class=\"token function\">static_cast</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>int32<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span>course<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">return</span> U<span class=\"token string\">\"{}{}{:0>2}\"</span><span class=\"token function\">_fmt</span><span class=\"token punctuation\">(</span>grade<span class=\"token punctuation\">,</span> courseName<span class=\"token punctuation\">,</span> id<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>次に当選者を無作為に抽出する関数を用意します。指定した人数分抽選し、当選した学生データを <code class=\"language-text\">Lottery::m_students</code> から削除し、当選者をまとめた配列を返す関数です。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Lottery.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">Array<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token class-name\">Lottery</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">chooseStudents</span><span class=\"token punctuation\">(</span>int32 n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tArray<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> winners<span class=\"token punctuation\">;</span>\n\n\tint32 chooseCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>chooseCount <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// ランダムで学科を指定(今回は専攻科を除くため3学科)</span>\n\t\tCourse course <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">static_cast</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Course<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// ランダムで学年を指定</span>\n\t\tint32 grade <span class=\"token operator\">=</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>course <span class=\"token operator\">==</span> Course<span class=\"token double-colon punctuation\">::</span>D <span class=\"token operator\">?</span> <span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\n        <span class=\"token comment\">// 指定したクラスの人数が0人であれば continue</span>\n        <span class=\"token keyword\">auto</span><span class=\"token operator\">&amp;</span> classroom <span class=\"token operator\">=</span> m_students<span class=\"token punctuation\">[</span>course<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>grade<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>classroom<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// ランダムに出席番号を指定, 末尾の学生と入れ替える</span>\n\t\tstd<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>classroom<span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span><span class=\"token function\">Random</span><span class=\"token punctuation\">(</span>classroom<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> classroom<span class=\"token punctuation\">.</span><span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token comment\">// 文字列に変換</span>\n\t\tString student <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token operator\">-></span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>grade<span class=\"token punctuation\">,</span> course<span class=\"token punctuation\">,</span> classroom<span class=\"token punctuation\">.</span><span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 当選者を追加</span>\n\t\twinners <span class=\"token operator\">&lt;&lt;</span> student<span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 末尾の学生を削除</span>\n\t\tclassroom<span class=\"token punctuation\">.</span><span class=\"token function\">pop_back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tchooseCount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> winners<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>指定した出席番号をそのまま削除せず、末尾の番号と入れ替えて末尾を削除するのは理由があります。有名な話ですが、動的配列から要素を削除しようとすると <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mi>n</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(n)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\">n</span><span class=\"mclose\">)</span></span></span></span></span> になります。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/e20e41d5-ab8c-7b12-70de-ff88717defa0.png\" alt=\"06.png\"></p>\n<p>対して末尾の要素のみを削除する場合は <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>O</mi><mo stretchy=\"false\">(</mo><mn>1</mn><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">O(1)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.02778em;\">O</span><span class=\"mopen\">(</span><span class=\"mord\">1</span><span class=\"mclose\">)</span></span></span></span></span> で済みます。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/0fe40e0a-8602-7472-53ed-a851db43b8f4.png\" alt=\"07.png\"></p>\n<p>何よりSiv3Dに指定したインデックスもしくは指定した要素のデータを削除するメソッドがなかった気がする(あったらすみません...)ので、これが1番手軽な気がします。</p>\n<h2>ログファイルに書き出す</h2>\n<p>　今回は学生会がメールで抽選結果を送信するとのことでした。わざわざ当選結果をメモして手打ちで送信するのも大変だと思うのでログファイルに書き出していました。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Main.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">\n<span class=\"token comment\">/* 省略 */</span>\n<span class=\"token comment\">// 当選者のログファイル</span>\nTextWriter <span class=\"token function\">logFile</span><span class=\"token punctuation\">(</span>U<span class=\"token string\">\"winners.txt\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">not</span> logFile<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">throw</span> Error<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"Failed to open `winners.txt`\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* 省略 */</span></code></pre></div>\n<p>先ほどの <code class=\"language-text\">Lottery::choooseStudents()</code> を改良します。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Lottery.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\">Array<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> <span class=\"token class-name\">Lottery</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">chooseStudents</span><span class=\"token punctuation\">(</span>int32 n<span class=\"token punctuation\">,</span> String title<span class=\"token punctuation\">,</span> TextWriter<span class=\"token operator\">&amp;</span> writer<span class=\"token punctuation\">,</span> <span class=\"token keyword\">bool</span> insertLineFeed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tArray<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> winners<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\twriter <span class=\"token operator\">&lt;&lt;</span> U<span class=\"token string\">\"&lt;\"</span> <span class=\"token operator\">&lt;&lt;</span> title <span class=\"token operator\">&lt;&lt;</span> U<span class=\"token string\">\">\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\tint32 chooseCount <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>chooseCount <span class=\"token operator\">&lt;</span> n<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tCourse course <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">static_cast</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>Course<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tint32 grade <span class=\"token operator\">=</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span>course <span class=\"token operator\">==</span> Course<span class=\"token double-colon punctuation\">::</span>D <span class=\"token operator\">?</span> <span class=\"token number\">2</span> <span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">auto</span><span class=\"token operator\">&amp;</span> classroom <span class=\"token operator\">=</span> m_students<span class=\"token punctuation\">[</span>course<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>grade<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>classroom<span class=\"token punctuation\">.</span><span class=\"token function\">isEmpty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">continue</span><span class=\"token punctuation\">;</span>\n\n\t\tstd<span class=\"token double-colon punctuation\">::</span><span class=\"token function\">swap</span><span class=\"token punctuation\">(</span>classroom<span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span><span class=\"token function\">Random</span><span class=\"token punctuation\">(</span>classroom<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> classroom<span class=\"token punctuation\">.</span><span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tString student <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token operator\">-></span><span class=\"token function\">toString</span><span class=\"token punctuation\">(</span>grade<span class=\"token punctuation\">,</span> course<span class=\"token punctuation\">,</span> classroom<span class=\"token punctuation\">.</span><span class=\"token function\">back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\twinners <span class=\"token operator\">&lt;&lt;</span> student<span class=\"token punctuation\">;</span>\n\t\twriter <span class=\"token operator\">&lt;&lt;</span> student<span class=\"token punctuation\">;</span>\n\n\t\tclassroom<span class=\"token punctuation\">.</span><span class=\"token function\">pop_back</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tchooseCount<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>insertLineFeed<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\twriter <span class=\"token operator\">&lt;&lt;</span> U<span class=\"token string\">\"\"</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n\t<span class=\"token keyword\">return</span> winners<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>これでログファイルが生成されます。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">App/winners.txt</div>\n<div class=\"gatsby-highlight\" data-language=\"txt\"><pre class=\"language-txt\"><code class=\"language-txt\">&lt;ギフトカード(7名)>\n2A-37\n3C-25\n4C-16\n1C-18\n5C-18\n1A-22\n1A-40\n\n&lt;1等 プロジェクター(1名)>\n2B-24</code></pre></div>\n<h2>スライド作成・表示</h2>\n<p>　ここは適当です。見た目を整えるためにもう少し調整しても良かったかもしれません。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Slide.hpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Common.hpp\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Slide</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span>Array<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> messages<span class=\"token punctuation\">,</span> String fontName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\tArray<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> m_messages<span class=\"token punctuation\">;</span>\n\tString m_fontName<span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">textWithShadow</span><span class=\"token punctuation\">(</span>String message<span class=\"token punctuation\">,</span> Vec2 pos<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Slide.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Slide.hpp\"</span></span>\n\n<span class=\"token class-name\">Slide</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span>Array<span class=\"token operator\">&lt;</span>String<span class=\"token operator\">></span> messages<span class=\"token punctuation\">,</span> String fontName<span class=\"token punctuation\">)</span>\n\t<span class=\"token operator\">:</span> <span class=\"token function\">m_messages</span><span class=\"token punctuation\">(</span>messages<span class=\"token punctuation\">)</span>\n\t<span class=\"token punctuation\">,</span> <span class=\"token function\">m_fontName</span><span class=\"token punctuation\">(</span>fontName<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">// 影をつけて文字を表示</span>\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">Slide</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">textWithShadow</span><span class=\"token punctuation\">(</span>String message<span class=\"token punctuation\">,</span> Vec2 pos<span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\tpos <span class=\"token operator\">+=</span> <span class=\"token class-name\">Scene</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Center</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token function\">FontAsset</span><span class=\"token punctuation\">(</span>m_fontName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Arg</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">center</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">.</span><span class=\"token function\">movedBy</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> ColorF<span class=\"token punctuation\">{</span> <span class=\"token number\">0.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.7</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">FontAsset</span><span class=\"token punctuation\">(</span>m_fontName<span class=\"token punctuation\">)</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">)</span>\n\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Arg</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">center</span><span class=\"token punctuation\">(</span>pos<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> Palette<span class=\"token double-colon punctuation\">::</span>Snow<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">Slide</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\tint32 length <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>int32<span class=\"token punctuation\">)</span>m_messages<span class=\"token punctuation\">.</span><span class=\"token function\">size</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>length <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>length <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tString message <span class=\"token operator\">=</span> m_messages<span class=\"token punctuation\">.</span><span class=\"token function\">front</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t<span class=\"token keyword\">this</span><span class=\"token operator\">-></span><span class=\"token function\">textWithShadow</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>length <span class=\"token operator\">==</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tString message <span class=\"token operator\">=</span> m_messages<span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">this</span><span class=\"token operator\">-></span><span class=\"token function\">textWithShadow</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> i <span class=\"token operator\">*</span> <span class=\"token number\">200</span> <span class=\"token operator\">-</span> <span class=\"token number\">100</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tString message <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>length <span class=\"token operator\">==</span> <span class=\"token number\">7</span> <span class=\"token operator\">?</span> U<span class=\"token string\">\"     \"</span> <span class=\"token operator\">:</span> U<span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span>int32 i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> length<span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tmessage <span class=\"token operator\">+=</span> m_messages<span class=\"token punctuation\">.</span><span class=\"token function\">at</span><span class=\"token punctuation\">(</span>i<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n\t\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">==</span> length <span class=\"token operator\">/</span> <span class=\"token number\">2</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tmessage <span class=\"token operator\">+=</span> U<span class=\"token string\">\"\\n\\n\"</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t\t<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">!=</span> length <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t\tmessage <span class=\"token operator\">+=</span> U<span class=\"token string\">\"  \"</span><span class=\"token punctuation\">;</span>\n\t\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n\t\t<span class=\"token keyword\">this</span><span class=\"token operator\">-></span><span class=\"token function\">textWithShadow</span><span class=\"token punctuation\">(</span>message<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>あとは <code class=\"language-text\">gifts</code> に <code class=\"language-text\">{ 景品名, 人数 }</code> の形式で入力し、必要な数スライドを作成します。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Main.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/* 省略 */</span>\n\n<span class=\"token keyword\">namespace</span> App <span class=\"token punctuation\">{</span>\n\tString title <span class=\"token operator\">=</span> U<span class=\"token string\">\"クリスマス抽選会\"</span><span class=\"token punctuation\">;</span>\n\tString closingMessage <span class=\"token operator\">=</span> U<span class=\"token string\">\"終わり！\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">Main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* 省略 */</span>\n    <span class=\"token keyword\">const</span> Array<span class=\"token operator\">&lt;</span>std<span class=\"token double-colon punctuation\">::</span>pair<span class=\"token operator\">&lt;</span>String<span class=\"token punctuation\">,</span> int32<span class=\"token operator\">>></span> gifts <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"カップラーメンセット(60名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"お菓子セット(60名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">60</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"ハーゲンダッツ(40名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"ギフトカード(7名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">7</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"3等 手袋(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"3等 トートバッグ(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"3等 ハンカチ(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"2等 yogibo(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"2等 ブランケット(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"1等 ドライヤー(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"1等 プロジェクター(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"1等 スピーカー(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t\t<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"1等 ワイヤレスイヤフォン(1名)\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    \t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// スライドをまとめる配列</span>\n    \tArray<span class=\"token operator\">&lt;</span>Slide<span class=\"token operator\">></span> slides<span class=\"token punctuation\">{</span> <span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> App<span class=\"token double-colon punctuation\">::</span>title <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"TitleFont\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n    \t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">const</span> <span class=\"token keyword\">auto</span><span class=\"token operator\">&amp;</span> <span class=\"token punctuation\">[</span>title<span class=\"token punctuation\">,</span> n<span class=\"token punctuation\">]</span> <span class=\"token operator\">:</span> gifts<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \t\tslides <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span>title<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span>U<span class=\"token char\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"TitleFont\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>n <span class=\"token operator\">%</span> <span class=\"token number\">10</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \t\t\tslides <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span>lottery<span class=\"token punctuation\">.</span><span class=\"token function\">chooseStudents</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> logFile<span class=\"token punctuation\">,</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"ListFont1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> n <span class=\"token operator\">/</span> <span class=\"token number\">10</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    \t\t\t\t<span class=\"token keyword\">bool</span> insertLineFeed <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">==</span> n <span class=\"token operator\">/</span> <span class=\"token number\">10</span> <span class=\"token operator\">-</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t\t\t\tslides <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span>lottery<span class=\"token punctuation\">.</span><span class=\"token function\">chooseStudents</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"\"</span><span class=\"token punctuation\">,</span> logFile<span class=\"token punctuation\">,</span> insertLineFeed<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"ListFont1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t\t\t<span class=\"token punctuation\">}</span>\n    \t\t<span class=\"token punctuation\">}</span>\n    \t\t<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    \t\t\tslides <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span>lottery<span class=\"token punctuation\">.</span><span class=\"token function\">chooseStudents</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">,</span> title<span class=\"token punctuation\">,</span> logFile<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"ListFont2\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \t\t<span class=\"token punctuation\">}</span>\n    \t<span class=\"token punctuation\">}</span>\n    \tslides <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Slide</span><span class=\"token punctuation\">(</span>App<span class=\"token double-colon punctuation\">::</span>closingMessage<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span>U<span class=\"token char\">' '</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> U<span class=\"token string\">\"ListFont1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token comment\">/* 省略 */</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>これでスライドが作成されました。</p>\n<p>あとは十字キーでスライドを切り替えるために <code class=\"language-text\">slides</code> の先頭からイテレータをまわして表示していました。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Main.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/* 省略 */</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">Main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* 省略 */</span>\n\n    <span class=\"token comment\">// slides の先頭からイテレータをまわす</span>\n\t<span class=\"token keyword\">auto</span> slide <span class=\"token operator\">=</span> slides<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> slide <span class=\"token operator\">!=</span> slides<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">/* 省略 */</span>\n    \n        <span class=\"token comment\">// スライド表示</span>\n\t\tslide<span class=\"token operator\">-></span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n        <span class=\"token comment\">// 十字キーでスライド切り替え</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>KeyRight<span class=\"token punctuation\">.</span><span class=\"token function\">down</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token operator\">++</span>slide<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>slide <span class=\"token operator\">!=</span> slides<span class=\"token punctuation\">.</span><span class=\"token function\">begin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> KeyLeft<span class=\"token punctuation\">.</span><span class=\"token function\">down</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token operator\">--</span>slide<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>雪を降らせる</h2>\n<p>　これは特に必要なかったのですが、なんとなく雰囲気を出すために用意しました。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Snowfall.hpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">pragma</span> <span class=\"token expression\">once</span></span>\n<span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Common.hpp\"</span></span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">Snowfall</span> <span class=\"token punctuation\">{</span>\n<span class=\"token keyword\">public</span><span class=\"token operator\">:</span>\n\t<span class=\"token function\">Snowfall</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> isCrystal<span class=\"token punctuation\">,</span> Texture emoji<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">void</span> <span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">private</span><span class=\"token operator\">:</span>\n\tVec2 m_pos<span class=\"token punctuation\">;</span>\n\tVec2 m_delta<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">double</span> m_size<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">double</span> m_alpha<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">bool</span> m_isCrystal<span class=\"token punctuation\">;</span>\n\tCircle m_circle<span class=\"token punctuation\">;</span>\n\tTexture m_emoji<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Snowfall.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token macro property\"><span class=\"token directive-hash\">#</span><span class=\"token directive keyword\">include</span> <span class=\"token string\">\"Snowfall.hpp\"</span></span>\n\n<span class=\"token class-name\">Snowfall</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Snowfall</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">bool</span> isCrystal<span class=\"token punctuation\">,</span> Texture emoji<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tm_pos <span class=\"token operator\">=</span> Vec2<span class=\"token punctuation\">{</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Scene</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Width</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Scene</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Height</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\tm_delta <span class=\"token operator\">=</span> Vec2<span class=\"token punctuation\">{</span> <span class=\"token operator\">-</span><span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">1.5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">3.0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\tm_size <span class=\"token operator\">=</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">15.0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">40.0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tm_alpha <span class=\"token operator\">=</span> <span class=\"token function\">Random</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.75</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\tm_isCrystal <span class=\"token operator\">=</span> isCrystal<span class=\"token punctuation\">;</span>\n\tm_circle <span class=\"token operator\">=</span> Circle<span class=\"token punctuation\">{</span> <span class=\"token punctuation\">{</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>  m_size <span class=\"token operator\">/</span> <span class=\"token number\">3</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\tm_emoji <span class=\"token operator\">=</span> emoji<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">Snowfall</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tm_pos <span class=\"token operator\">+=</span> m_delta<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">-</span>m_size <span class=\"token operator\">></span> m_pos<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tm_pos<span class=\"token punctuation\">.</span>x <span class=\"token operator\">=</span> m_size <span class=\"token operator\">+</span> <span class=\"token class-name\">Scene</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Width</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">></span> m_size <span class=\"token operator\">+</span> <span class=\"token class-name\">Scene</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Height</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tm_pos<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> <span class=\"token operator\">-</span>m_size<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token class-name\">Snowfall</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>m_isCrystal<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\tm_emoji\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">resized</span><span class=\"token punctuation\">(</span>m_size<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span>m_pos<span class=\"token punctuation\">,</span> ColorF<span class=\"token punctuation\">{</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> m_alpha <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t\tm_circle\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">movedBy</span><span class=\"token punctuation\">(</span>m_pos<span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span>ColorF<span class=\"token punctuation\">{</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> m_alpha <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">src/Main.cpp</div>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token comment\">/* 省略 */</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">Main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> Texture snowEmoji<span class=\"token punctuation\">{</span> U<span class=\"token string\">\"❄\"</span>_emoji <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// 雪を生成</span>\n\tArray<span class=\"token operator\">&lt;</span>Snowfall<span class=\"token operator\">></span> snowfalls<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> i <span class=\"token operator\">&lt;</span> <span class=\"token number\">250</span><span class=\"token punctuation\">;</span> i<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">bool</span> isCrystal <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>i <span class=\"token operator\">%</span> <span class=\"token number\">2</span> <span class=\"token operator\">==</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\tsnowfalls <span class=\"token operator\">&lt;&lt;</span> <span class=\"token function\">Snowfall</span><span class=\"token punctuation\">(</span>isCrystal<span class=\"token punctuation\">,</span> snowEmoji<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n\n    <span class=\"token comment\">/* 省略 */</span>\n\n    <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token class-name\">System</span><span class=\"token double-colon punctuation\">::</span><span class=\"token function\">Update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&amp;&amp;</span> slide <span class=\"token operator\">!=</span> slides<span class=\"token punctuation\">.</span><span class=\"token function\">end</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token comment\">// 雪を降らせる</span>\n\t\t<span class=\"token keyword\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">auto</span><span class=\"token operator\">&amp;</span> snowfall <span class=\"token operator\">:</span> snowfalls<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t\tsnowfall<span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t\tsnowfall<span class=\"token punctuation\">.</span><span class=\"token function\">draw</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\n        <span class=\"token comment\">/* 省略 */</span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>余談</h2>\n<p>　背景画像はネットからお借りし、それをもとにProcessingで点画風のイラストを作成して使いました。</p>\n<p><a href=\"https://www.photo-ac.com/main/detail/24962387?title=%E3%82%AF%E3%83%AA%E3%82%B9%E3%83%9E%E3%82%B9%E3%81%AE%E3%82%AD%E3%83%A9%E3%82%AD%E3%83%A9%E8%83%8C%E6%99%AF%E3%83%86%E3%82%AF%E3%82%B9%E3%83%81%E3%83%A3&#x26;searchId=385306660\">元画像</a></p>\n<p>作成した画像\n<img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/f4b49fd9-d78f-28f5-2b68-cb7ceb722093.png\" alt=\"08.png\"></p>\n<p>最近はChatGPTを用いて背景画像を作成する機能も実装されたそうです。</p>\n<blockquote class=\"twitter-tweet\" data-dnt=\"true\" align=\"center\"><p lang=\"ja\" dir=\"ltr\">Siv3D でゲームの背景画像を自動生成する方法<a href=\"https://twitter.com/hashtag/Siv3D?src=hash&amp;ref_src=twsrc%5Etfw\">#Siv3D</a> <a href=\"https://twitter.com/hashtag/OpenSiv3D?src=hash&amp;ref_src=twsrc%5Etfw\">#OpenSiv3D</a> (v0.6.7) <a href=\"https://t.co/Xfpo6fQOQI\">pic.twitter.com/Xfpo6fQOQI</a></p>&mdash; Ryo Suzuki (@Reputeless) <a href=\"https://twitter.com/Reputeless/status/1636287169064218624?ref_src=twsrc%5Etfw\">March 16, 2023</a></blockquote>\n<script async src=\"https://platform.twitter.com/widgets.js\" charset=\"utf-8\"></script>\n<h2>まとめ</h2>\n<p>　ところどころ気になる点もありますが、おおまかな説明は以上です。学生会の皆さんいつもありがとうございます。</p>","frontmatter":{"title":"クリスマス抽選ソフトのつくり方","date":"2023/03/17","category":"ゼミ資料","isPublic":true},"fields":{"slug":"/12/"}},"previous":{"fields":{"slug":"/11/"},"frontmatter":{"title":"procon33競技部門のサンプル音源をつくりたい"}},"next":{"fields":{"slug":"/13/"},"frontmatter":{"title":"その場でPDFにエクスポートできるMarkdownエディタを作った"}}},"pageContext":{"id":"89a7bc9e-0011-56e8-ae29-3790145397e9","previousPostId":"0a824a39-4eee-51a6-9fcc-b81c92f60a07","nextPostId":"5d9842ba-7e7b-5f85-89f5-625a9cf957c8"}},"staticQueryHashes":["1324386404"],"slicesMap":{}}