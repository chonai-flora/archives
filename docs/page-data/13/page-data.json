{"componentChunkName":"component---src-templates-blog-post-js","path":"/13/","result":{"data":{"site":{"siteMetadata":{"title":"アーカイブ"}},"markdownRemark":{"id":"5d9842ba-7e7b-5f85-89f5-625a9cf957c8","excerpt":"はじめに Reactで「MarkLive PDF」というMarkdownエディタを作りました。作成・編集したMarkdownファイルをPDF化することができます。 https://chonai-flora.github.io/marklive-pdf/ 動機 部の議録やゼミ資料をWord…","html":"<h2>はじめに</h2>\n<p>Reactで「<a href=\"https://chonai-flora.github.io/marklive-pdf/\">MarkLive PDF</a>」というMarkdownエディタを作りました。作成・編集したMarkdownファイルをPDF化することができます。</p>\n<p><a href=\"https://chonai-flora.github.io/marklive-pdf/\">https://chonai-flora.github.io/marklive-pdf/</a></p>\n<h2>動機</h2>\n<p>部の議録やゼミ資料をWordでつくるのが面倒なので、MarkdownをサクッとPDF化できたらいいなと思い実装しました。実装はかなり緩いのでバグ等あるかもしれません...。</p>\n<h2>使い方</h2>\n<p>エディタにそのままMarkdownファイルを書き込んでください。エディタ部はuiwの <a href=\"https://uiwjs.github.io/react-md-editor/\"><code class=\"language-text\">react-md-editor</code></a> をほとんどそのままお借りしています。</p>\n<p>左下の「Markdown形式で保存」ボタンで編集中のmdファイルがダウンロードされます。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/267161a9-635b-33d9-f302-6b9d387c0629.png\" alt=\"image.png\"></p>\n<p>隣の「PDF形式にエクスポート」ボタンを押すと印刷画面が表示されるので、スタイルを確認して保存します。<code class=\"language-text\">&lt;br></code> タグでページ分割が可能です。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/c4add019-a339-9583-abe1-7772f4d9dc7a.png\" alt=\"image.png\"></p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/5ae9fba8-bf5a-18de-f3cb-c248f2c072ab.png\" alt=\"image.png\"></p>\n<p>もちろん画像埋め込みやハイパーリンク、LaTexにも対応しています。</p>\n<p><img src=\"https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/1889756/e540a355-b78c-aeb1-1ec5-aa6c3233aac0.png\" alt=\"image.png\"></p>\n<h2>実装</h2>\n<p>PDFへの変換は「PDF Preview」に表示している内容にrefオブジェクトを渡し、 <a href=\"https://www.npmjs.com/package/react-to-print\"><code class=\"language-text\">react-to-print</code></a> で保存しています。DOMを印刷することができるライブラリです。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">PdfPreview.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token string\">\"katex/dist/katex.css\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> remarkMath <span class=\"token keyword\">from</span> <span class=\"token string\">\"remark-math\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> rehypeKatex <span class=\"token keyword\">from</span> <span class=\"token string\">\"rehype-katex\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MDEditor <span class=\"token keyword\">from</span> <span class=\"token string\">\"@uiw/react-md-editor\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">PdfPreview</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>props<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> source<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div id<span class=\"token operator\">=</span><span class=\"token string\">\"pdf\"</span> data<span class=\"token operator\">-</span>color<span class=\"token operator\">-</span>mode<span class=\"token operator\">=</span><span class=\"token string\">\"light\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginBottom<span class=\"token operator\">:</span> <span class=\"token string\">\"80px\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>MDEditor<span class=\"token punctuation\">.</span>Markdown\n                style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> margin<span class=\"token operator\">:</span> <span class=\"token string\">\"30px\"</span><span class=\"token punctuation\">,</span> pageBreakAfter<span class=\"token operator\">:</span> <span class=\"token string\">\"always\"</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                disableCopy<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">}</span>\n                remarkPlugins<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span>remarkMath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n                rehypePlugins<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">[</span>rehypeKatex<span class=\"token punctuation\">]</span><span class=\"token punctuation\">}</span>\n                source<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>props<span class=\"token punctuation\">.</span>source <span class=\"token operator\">||</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> PdfPreview<span class=\"token punctuation\">;</span></code></pre></div>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">Editor.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> React<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> useRef<span class=\"token punctuation\">,</span> useState<span class=\"token punctuation\">,</span> useEffect <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> MDEditor<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> MDEditorProps <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"@uiw/react-md-editor\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> PdfPreview <span class=\"token keyword\">from</span> <span class=\"token string\">\"./PdfPreview\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Editor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* 省略 */</span>\n    \n    <span class=\"token comment\">// PDF用のrefオブジェクト</span>\n    <span class=\"token keyword\">const</span> pdfRef <span class=\"token operator\">=</span> <span class=\"token function\">useRef</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    \n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>mdTitle<span class=\"token punctuation\">,</span> setTitle<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span><span class=\"token builtin\">string</span><span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>state<span class=\"token punctuation\">,</span> setVisible<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token generic-function\"><span class=\"token function\">useState</span><span class=\"token generic class-name\"><span class=\"token operator\">&lt;</span>MDEditorProps<span class=\"token operator\">></span></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n        visibleDragbar<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        hideToolbar<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        highlightEnable<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        enableScroll<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n        value<span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n        preview<span class=\"token operator\">:</span> <span class=\"token string\">\"live\"</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div data<span class=\"token operator\">-</span>color<span class=\"token operator\">-</span>mode<span class=\"token operator\">=</span><span class=\"token string\">\"light\"</span><span class=\"token operator\">></span>\n            <span class=\"token comment\">/* 省略 */</span>\n            \n            <span class=\"token operator\">&lt;</span>h3<span class=\"token operator\">></span><span class=\"token constant\">PDF</span> Preview<span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>h3<span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span>div ref<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>pdfRef<span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token comment\">// PdfPreview に編集中のmdデータを渡す</span>\n                <span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>value <span class=\"token operator\">&amp;&amp;</span> <span class=\"token punctuation\">(</span>\n                    state<span class=\"token punctuation\">.</span>value<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"&lt;br>\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>section<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">&lt;</span>PdfPreview source<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>section<span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span><span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n           \n            <span class=\"token comment\">/* 省略 */</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">PdfPreview</code> のstyleに <code class=\"language-text\">pageBreakAfter: \"always\"</code> を指定することで、ページ分割を実現しています。</p>\n<p>あとはボタンを配置して <code class=\"language-text\">ReactToPrint</code> の <code class=\"language-text\">content</code> に先ほどのrefオブジェクトを渡します。スタイルが適用されるのもありがたいです。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">Editor.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> ReactToPrint <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-to-print\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">/* 省略 */</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Editor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div data<span class=\"token operator\">-</span>color<span class=\"token operator\">-</span>mode<span class=\"token operator\">=</span><span class=\"token string\">\"light\"</span><span class=\"token operator\">></span>\n            <span class=\"token comment\">/* 省略 */</span>\n    \n            <span class=\"token operator\">&lt;</span>div<span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>ReactToPrint\n                    trigger<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span>\n                        <span class=\"token operator\">&lt;</span>button\n                            type<span class=\"token operator\">=</span><span class=\"token string\">\"button\"</span>\n                            disabled<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span>\n                            style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> marginLeft<span class=\"token operator\">:</span> <span class=\"token number\">10</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                        <span class=\"token operator\">></span>\n                            <span class=\"token constant\">PDF</span>形式にエクスポート\n                        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>button<span class=\"token operator\">></span>\n                    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span>\n                    content<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> pdfRef<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">}</span>\n                    documentTitle<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>mdTitle <span class=\"token operator\">||</span> <span class=\"token string\">\"untitled\"</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">.pdf</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n            \n            <span class=\"token comment\">/* 省略 */</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2>改善点</h2>\n<ul>\n<li><code class=\"language-text\">redux-persist</code> でstoreの状態(編集中のテキスト)を永続化しても良いかも</li>\n<li>ドラッグ&#x26;ドロップでファイルを読み込めるようにしても良いかも</li>\n</ul>\n<h2>おわりに</h2>\n<p>今のところ想定通り動いてくれているので、資料作成が捗っています。部員に使用感等聞いて適宜修正していけたらと思います。</p>\n<p>リポジトリ: <a href=\"https://github.com/chonai-flora/marklive-pdf/\">https://github.com/chonai-flora/marklive-pdf/</a><br>\n参考: <a href=\"https://github.com/uiwjs/react-md-editor/\">https://github.com/uiwjs/react-md-editor/</a></p>\n<h2>追記: ドラッグアンドドロップに対応</h2>\n<p>テキストエリアへのドラッグアンドドロップ機能を追加しました。テキストエリアにMarkdownファイルをドラッグアンドドロップして編集することができます。</p>\n<div class=\"gatsby-code-title gatsby-remark-code-title\">Editor.tsx</div>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useDropzone <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-dropzone\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> PdfPreview <span class=\"token keyword\">from</span> <span class=\"token string\">\"./PdfPreview\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Editor</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">/* 省略 */</span>\n    \n    <span class=\"token keyword\">const</span> onDrop <span class=\"token operator\">=</span> <span class=\"token function\">useCallback</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token punctuation\">(</span>acceptedFiles<span class=\"token operator\">:</span> File<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">const</span> acceptedFile <span class=\"token operator\">=</span> acceptedFiles<span class=\"token punctuation\">.</span><span class=\"token function\">slice</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> filename <span class=\"token operator\">=</span> acceptedFile<span class=\"token punctuation\">.</span>name <span class=\"token operator\">||</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">const</span> extension <span class=\"token operator\">=</span> filename<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span><span class=\"token function\">toLowerCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>extension <span class=\"token operator\">!==</span> <span class=\"token keyword\">undefined</span> <span class=\"token operator\">&amp;&amp;</span> extension <span class=\"token operator\">!==</span> <span class=\"token string\">\"md\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"file type is not supported\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n                value<span class=\"token operator\">:</span> <span class=\"token string\">\"このファイルのプレビューを表示できません。拡張子が`md`のファイルのみ対応しています。\"</span>\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n        <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n            <span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> acceptedFile<span class=\"token punctuation\">.</span><span class=\"token function\">text</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setTitle</span><span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">.</span><span class=\"token function\">split</span><span class=\"token punctuation\">(</span><span class=\"token string\">\".\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n            <span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n                <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span>\n                value<span class=\"token operator\">:</span> text\n            <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> getRootProps<span class=\"token punctuation\">,</span> getInputProps <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useDropzone</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> onDrop<span class=\"token punctuation\">,</span> noClick<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n        <span class=\"token operator\">&lt;</span>div data<span class=\"token operator\">-</span>color<span class=\"token operator\">-</span>mode<span class=\"token operator\">=</span><span class=\"token string\">\"light\"</span><span class=\"token operator\">></span>\n            <span class=\"token comment\">/* 省略 */</span>\n            \n            <span class=\"token operator\">&lt;</span>div <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">getRootProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>input <span class=\"token punctuation\">{</span><span class=\"token operator\">...</span><span class=\"token function\">getInputProps</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">}</span> <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n                <span class=\"token operator\">&lt;</span>MDEditor\n                    autoFocus\n                    value<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">}</span>\n                    previewOptions<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                        linkTarget<span class=\"token operator\">:</span> <span class=\"token string\">\"_blank\"</span><span class=\"token punctuation\">,</span>\n                        remarkPlugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>remarkMath<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n                        rehypePlugins<span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>rehypeKatex<span class=\"token punctuation\">]</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                    height<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token number\">400</span><span class=\"token punctuation\">}</span>\n                    highlightEnable<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>highlightEnable<span class=\"token punctuation\">}</span>\n                    hideToolbar<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token operator\">!</span>state<span class=\"token punctuation\">.</span>hideToolbar<span class=\"token punctuation\">}</span>\n                    enableScroll<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>enableScroll<span class=\"token punctuation\">}</span>\n                    visibleDragbar<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>visibleDragbar<span class=\"token punctuation\">}</span>\n                    textareaProps<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n                        placeholder<span class=\"token operator\">:</span> <span class=\"token string\">\"記事やレポートをMarkdown形式で記述してください\"</span><span class=\"token punctuation\">,</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                    preview<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>state<span class=\"token punctuation\">.</span>preview<span class=\"token punctuation\">}</span>\n                    onChange<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">(</span>newValue <span class=\"token operator\">=</span> <span class=\"token string\">\"\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n                        <span class=\"token function\">setVisible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token operator\">...</span>state<span class=\"token punctuation\">,</span> value<span class=\"token operator\">:</span> newValue <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n                    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n                <span class=\"token operator\">/</span><span class=\"token operator\">></span>\n            <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n           \n            <span class=\"token comment\">/* 省略 */</span>\n        <span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"その場でPDFにエクスポートできるMarkdownエディタを作った","date":"2023/04/01","category":"ゼミ資料","isPublic":true},"fields":{"slug":"/13/"}},"previous":{"fields":{"slug":"/12/"},"frontmatter":{"title":"クリスマス抽選ソフトのつくり方"}},"next":{"fields":{"slug":"/14/"},"frontmatter":{"title":"LINE botの作り方"}}},"pageContext":{"id":"5d9842ba-7e7b-5f85-89f5-625a9cf957c8","previousPostId":"89a7bc9e-0011-56e8-ae29-3790145397e9","nextPostId":"399f23c7-62c6-54e1-a864-c8d70b54aeec"}},"staticQueryHashes":["1324386404"],"slicesMap":{}}